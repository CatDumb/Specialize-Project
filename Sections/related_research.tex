%
% This is the TeX file for the related research section
%
\section{RELATED RESEARCH}

\subsection{Bus-Related Services}

Previous groups' research has investigated traffic-related value-added services, such as nearby hospitals and automatic teller machines (cite that group here). When it comes to our project, one major candidate for us to continue this research direction is the addition of buses and public transport as a whole. Our research investigates a range of existing applications that provide services related to buses. Through a thorough analysis of established solutions within this field, our objective is to acquire insights that will guide the improvement of our application by finding a compromise between the current system's strengths and weaknesses.

The existing solutions in question are the package offered by FPT in the names of Go!Bus TPHCM and the Buyt TPHCM website, as well as BusMap by Phenikaa MaaS JSC.
\subsubsection{The FPT Ecosystem}

Besides Go!Bus TPHCM, FPT offers a wide set of choices for citizens to track traﬀic data, and these services are linked together. Most notably, the TTGT Tp Ho Chi Minh app allows users to see public cameras for traﬀic. We place particular emphasis on Go!Bus as it aligns with our project's focus, and Buyt TPHCM holds significance for data collection, as detailed in subsequent sections. These applications play pivotal roles in informing our research and development efforts.

\subsubsubsection{Go!Bus}

Fundamentally, Go!Bus offers solely bus-related services like bus stop searching, bus route searching, and routing. The app also has some support for Grab when routing. The home screen for the app is as follows:

\begin{figure}[H]
    \centering
    \includegraphics[width=0.5\textwidth]{assets/images/Research/Bus/gobus_home.png}
    \caption{The home screen for Go!Bus.}
    \label{fig:gobus_homescreen}
\end{figure}

Nevertheless, during our testing of these features, none of them functioned, or had inconsistent uptimes. Here are a few examples of these occurrences.
\begin{figure}[H]
    \centering
    \subfloat[No data for nearby routes.]{
        \includegraphics[width=0.28\linewidth]{assets/images/Research/Bus/gobus_find.png}
        \label{fig:sub1}
    }
    \hspace{0.5cm} % Add a horizontal space of 1cm
    \subfloat[The stops do not show anything when pressed.]{
        \includegraphics[width=0.28\linewidth]{assets/images/Research/Bus/gobus_routes.png}
        \label{fig:sub2}
    }
    \hspace{0.5cm} % Add a horizontal space of 1cm
    \subfloat[Embedded web view with server error.]{
        \includegraphics[width=0.28\linewidth]{assets/images/Research/Bus/gobus_instruction.png}
        \label{fig:sub3}
        }
    \caption{Go!Bus functionalities problems}
\end{figure}

It also portrayed some mobile app bad practices, such as embedding an excessive number of web views into the user interface. Apple, in particular, is not fond of this approach and publicly stated that apps using this will not be accepted in the future. This is one of the points that we will take into consideration when developing our iOS app.

\subsubsubsection{Buyt TPHCM website}
Buyt TPHCM website is an online resource designed to provide comprehensive information and tools for navigating the public bus system in Ho Chi Minh City. This website aims to enhance the accessibility and user experience of public transportation within the city by offering the following key functionalities:

\begin{itemize}
    \item \textbf{Detailed route information:} The website provides users with comprehensive information on all bus routes in Ho Chi Minh City, including individual stop locations, schedules, and route maps.
    \item \textbf{Real-time bus arrival predictions:} To promote efficient travel planning, buyttphcm.com.vn offers real-time bus arrival predictions for all routes, allowing users to make informed decisions about their travel time.
    \item \textbf{Convenient tools and resources:} This website provides access to the Go!Bus mobile application, enabling users to easily purchase tickets and plan their bus journeys on the go. Additionally, users can find helpful information about the Public Transport Management Center and other relevant resources.
    \item \textbf{Up-to-date news and information:} buyttphcm.com.vn keeps users informed of the latest developments in the Ho Chi Minh City bus system, including temporary route changes, service disruptions, and new initiatives.
\end{itemize}

With its regularly updated resources, Buyt TP HCM will play a crucial role in our data collection process for bus stops and routes in the later stages of our project.

\subsubsection{BusMap}

BusMap rose as a prime solution for city navigation using buses. It also expanded into other regions and countries like Thailand and is overall doing well.

The fundamental bus services like searching and routing are executed well on BusMap, bar some UI lag that could be due to the excessive inclusion of map views. Users can see the bus locations that are coming their way with an estimated time of arrival. There are also other services offered by BusMap, such as JobMap, MotelMap, and driver license support. However, sections like "Blogs" and "News" might be unnecessary for most users.

\begin{figure}[H]
    \centering
    \includegraphics[width=0.3\textwidth]{assets/images/Research/Bus/busmap_home.png}
    \caption{The home screen for BusMap}
    \label{fig:busmap_homescreen}
\end{figure}

\subsubsection{Conclusion}

Both of these apps share a common feature of being equipped with an abundance of supplementary services. While Go!Bus TPHCM is compatible with Grab, BusMap has diversified its partnerships to include other businesses. One apparent limitation of UTraffic is the lack of access to real-time data, such as the current locations of buses and the duration until the next journey. Nevertheless, with sufficient effort and development, our application can excel as a dependable routing and search engine. Ultimately, the primary function of UTraffic is to process congestion data; therefore, we must be careful not to delve too thoroughly into other domains.

\subsection{UTraffic's system analysis and design}

\subsubsection{Current code base structure}

\subsubsection{Implemented APIs}

During our research to improve the performance and coherence of the application, we have come across some crucial APIs that are listed below:
\begin{itemize}
    \item \textbf{Find Route by ID: /routes/route\_id} - Retrieve detailed information about a specific bus route.
    \item \textbf{Nearby Routes: /routes/nearby} - Discover nearby bus routes based on location.
    \item \textbf{Find Stops by Route: /routes/route\_id/stops} - Get a list of bus stops along a specific route.
    \item \textbf{Find Stops by Location: /stops/nearby} - Find bus stops near a given location.
    \item \textbf{Route Search: /routes/search} - Search for bus routes based on keywords or criteria.
\end{itemize}

We also made changes to the currently deployed API endpoints. At the moment, the endpoint \lstinline{/traffic-status/get-status-v2} receives the query paramaters which are the northeast and southwest bounds of the client's visible map and the zoom level in order to return the appropriate street segments. This endpoint is currently used by the Android app as well as the web version of UTraffic. We have implemented another endpoint, \lstinline{/traffic-status/get-status-v3}, to handle the same functionality but with GeoJSON as the response. This is done by following the GeoJSON's standard format of being a FeatureCollection of Features, where each Feature is a Point with the coordinates of the traffic status. The following is the comparison between the two format when taking a node as an example:
\begin{figure}[H]
    \centering
    \subfloat[The current response format.]{
        \includegraphics[width=0.48\linewidth]{assets/images/Research/API/notgeojson.png}
        \label{fig:notgeojson_response}
    }
    \hspace{0.5cm} % Add a horizontal space of 1cm
    \subfloat[The GeoJSON response format.]{
        \includegraphics[width=0.48\linewidth]{assets/images/Research/API/geojson.png}
        \label{fig:geojson_response}
    }
    \hspace{0.5cm} % Add a horizontal space of 1cm
    \caption{Comparison between the current response format and the GeoJSON format.}
\end{figure}

GeoJSON helps tremendously when implementing for the iOS app, as it is a standard format that is supported by Apple's MapKit \cite{mkgeojsonobject}. This means that we can easily convert the response into a list of \lstinline{MKAnnotation} and display them on the map without having to parse the original response to dedicated classes, saving development effort and adhering to Apple's best practices.